name: niv

license: MIT

ghc-options:
    - -Wall
    - -Werror

    # For macOS: https://github.com/gibiansky/IHaskell/issues/942
    - -optP-Wno-nonportable-include-path

dependencies:
    - aeson
    - aeson-pretty
    - base
    - bytestring
    - directory
    - file-embed
    - filepath
    - github
    - hashable
    - mtl
    - optparse-applicative
    - process
    - string-qq
    - text
    - unliftio
    - unordered-containers

library:
    source-dirs:
        - src
    dependencies:
        - aeson
        - github
        - tasty
        - tasty-hunit
        - unordered-containers

executables:
    niv:
        main: Niv.main
        source-dirs: app
        data-files:
            - nix/sources.nix
        dependencies:
            - niv
    niv-test:
        main: NivTest.main
        source-dirs: app
        dependencies:
            - tasty
            - niv
